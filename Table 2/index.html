<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MDC Table with Filters, Sort, Pagination</title>

  <!-- MDC Web CSS -->
  <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
  <style>
    body {
      font-family: sans-serif;
    }
    .mdc-data-table {
      margin: 20px auto;
      width: 90%;
    }
    .filters {
      margin: 20px auto;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      width: 90%;
      align-items: flex-end;
    }
    .filters label {
      font-weight: bold;
      display: block;
      margin-bottom: 4px;
    }
    input, select, button {
      padding: 8px;
      font-size: 1rem;
    }
    th {
      cursor: pointer;
    }
    .pagination {
      display: flex;
      justify-content: space-between;
      margin: 20px auto;
      width: 90%;
    }
  </style>
</head>
<body>

<!-- Filters -->
<div class="filters">
  <div>
    <label for="filterName">Search Name:</label>
    <input type="text" id="filterName" placeholder="Type a name...">
  </div>

  <div>
    <label for="filterRole">Filter Role:</label>
    <select id="filterRole">
      <option value="">All Roles</option>
      <option>Admin</option>
      <option>User</option>
      <option>Guest</option>
    </select>
  </div>

  <button id="resetFilters">Reset Filters</button>
  <button id="exportCsv">Export CSV</button>
</div>

<!-- Table -->
<div class="mdc-data-table" id="tableContainer">
  <table class="mdc-data-table__table" id="myTable">
    <thead>
      <tr>
        <th>Name ▲▼</th>
        <th>Role ▲▼</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data will be rendered here -->
    </tbody>
  </table>
</div>

<!-- Pagination -->
<div class="pagination">
  <button id="prevPage">Previous</button>
  <span id="pageInfo">Page 1</span>
  <button id="nextPage">Next</button>
</div>

<script>
  const data = [
    { name: "Alice", role: "Admin" },
    { name: "Bob", role: "User" },
    { name: "Charlie", role: "Guest" },
    { name: "David", role: "Admin" },
    { name: "Eva", role: "User" },
    { name: "Frank", role: "Guest" },
    { name: "Grace", role: "User" },
    { name: "Henry", role: "Admin" },
    { name: "Ivy", role: "Guest" },
    { name: "Jack", role: "User" },
    { name: "Kate", role: "Admin" }
  ];

  const pageSize = 5;
  let currentPage = 1;
  let currentData = [...data];
  let currentSort = { column: null, asc: true };

  const tableBody = document.querySelector("#myTable tbody");
  const pageInfo = document.getElementById("pageInfo");

  function renderTable() {
    const start = (currentPage - 1) * pageSize;
    const end = start + pageSize;
    const pageData = currentData.slice(start, end);

    tableBody.innerHTML = pageData.map(row =>
      `<tr><td>${row.name}</td><td>${row.role}</td></tr>`
    ).join('');

    pageInfo.textContent = `Page ${currentPage} of ${Math.ceil(currentData.length / pageSize)}`;
  }

  function applyFilters() {
    const nameFilter = document.getElementById("filterName").value.toLowerCase();
    const roleFilter = document.getElementById("filterRole").value;

    currentData = data.filter(row => {
      return row.name.toLowerCase().includes(nameFilter) &&
             (roleFilter === '' || row.role === roleFilter);
    });

    currentPage = 1;
    sortData();
    renderTable();
  }

  function sortData() {
    if (!currentSort.column) return;
    const { column, asc } = currentSort;
    currentData.sort((a, b) => {
      const valA = a[column].toLowerCase();
      const valB = b[column].toLowerCase();
      return asc ? valA.localeCompare(valB) : valB.localeCompare(valA);
    });
  }

  function exportCSV() {
    let csv = "Name,Role\n";
    currentData.forEach(row => {
      csv += `${row.name},${row.role}\n`;
    });
    const blob = new Blob([csv], { type: "text/csv" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "table-data.csv";
    a.click();
    URL.revokeObjectURL(url);
  }

  function resetFilters() {
    document.getElementById("filterName").value = '';
    document.getElementById("filterRole").value = '';
    currentData = [...data];
    currentSort = { column: null, asc: true };
    currentPage = 1;
    renderTable();
  }

  // Event Listeners
  document.getElementById("filterName").addEventListener("input", applyFilters);
  document.getElementById("filterRole").addEventListener("change", applyFilters);
  document.getElementById("resetFilters").addEventListener("click", resetFilters);
  document.getElementById("exportCsv").addEventListener("click", exportCSV);

  document.getElementById("prevPage").addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      renderTable();
    }
  });

  document.getElementById("nextPage").addEventListener("click", () => {
    const totalPages = Math.ceil(currentData.length / pageSize);
    if (currentPage < totalPages) {
      currentPage++;
      renderTable();
    }
  });

  document.querySelectorAll("#myTable thead th").forEach((th, index) => {
    th.addEventListener("click", () => {
      const column = index === 0 ? "name" : "role";
      if (currentSort.column === column) {
        currentSort.asc = !currentSort.asc;
      } else {
        currentSort = { column, asc: true };
      }
      sortData();
      renderTable();
    });
  });

  renderTable();
</script>

</body>
</html>
